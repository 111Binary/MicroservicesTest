(function(){angular.module("app").controller("HomeController",["$scope","$http","$timeout",function(n,t,i){var r=this;r.CommandBaseURL="";r.QueryBaseURL="";t.get("/Home/Settings").then(function(n){r.CommandBaseURL=n.data.commandBaseURL;r.QueryBaseURL=n.data.queryBaseURL;r.getCustomers();r.getVehiclesData()});r.getCustomers=function(){t.get(r.QueryBaseURL+"/customers/").then(function(n){r.customers=n.data})};r.getVehiclesData=function(){t.get(r.QueryBaseURL+"/vehicles/").then(function(n){r.vehicles=n.data;i(function(){r.getVehiclesData()},1e4)})};r.simulatePing=function(n){var i={VehicleId:n.vehicleId};t.post(r.CommandBaseURL+"/Ping/",i,{headers:{"Content-Type":"application/json"}}).success(function(){})};r.showDate=function(n){return new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds())};r.NowUTC=moment();r.isOnline=function(n){var t=moment(n.latestPingAt).add(1,"minutes");return!angular.isUndefined(t)&&t!=null?t>=moment()?!0:!1:!1}}])})();